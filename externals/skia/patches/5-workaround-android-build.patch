diff --git a/src/images/SkImageDecoder_libjpeg.cpp b/src/images/SkImageDecoder_libjpeg.cpp
index b08835b..f6eb69b 100644
--- a/src/images/SkImageDecoder_libjpeg.cpp
+++ b/src/images/SkImageDecoder_libjpeg.cpp
@@ -21,6 +21,8 @@
 #include "SkCanvas.h"
 
 
+
+
 #include <stdio.h>
 extern "C" {
     #include "jpeglib.h"
@@ -70,6 +72,10 @@ static void overwrite_mem_buffer_size(jpeg_decompress_struct* cinfo) {
 #endif // SK_BUILD_FOR_ANDROID
 }
 
+#if defined(SK_BUILD_FOR_ANDROID)
+#undef SK_BUILD_FOR_ANDROID
+#endif
+
 //////////////////////////////////////////////////////////////////////////
 //////////////////////////////////////////////////////////////////////////
 
diff --git a/src/images/SkImageDecoder_libpng.cpp b/src/images/SkImageDecoder_libpng.cpp
index cd09f5f..454e381 100644
--- a/src/images/SkImageDecoder_libpng.cpp
+++ b/src/images/SkImageDecoder_libpng.cpp
@@ -23,6 +23,10 @@ extern "C" {
 #include "png.h"
 }
 
+#if defined(SK_BUILD_FOR_ANDROID)
+#undef SK_BUILD_FOR_ANDROID
+#endif
+
 /* These were dropped in libpng >= 1.4 */
 #ifndef png_infopp_NULL
 #define png_infopp_NULL NULL
diff --git a/src/images/SkJpegUtility.cpp b/src/images/SkJpegUtility.cpp
index e17b55b..de77269 100644
--- a/src/images/SkJpegUtility.cpp
+++ b/src/images/SkJpegUtility.cpp
@@ -8,6 +8,10 @@
 
 #include "SkJpegUtility.h"
 
+#if defined(SK_BUILD_FOR_ANDROID)
+#undef SK_BUILD_FOR_ANDROID
+#endif
+
 /////////////////////////////////////////////////////////////////////
 static void sk_init_source(j_decompress_ptr cinfo) {
     skjpeg_source_mgr*  src = (skjpeg_source_mgr*)cinfo->src;
